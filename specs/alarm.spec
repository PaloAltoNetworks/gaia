# Model
model:
  rest_name: alarm
  resource_name: alarms
  entity_name: Alarm
  package: sephiroth
  group: core/monitoring
  description: An alarm represents an event requiring attention.
  get:
    description: Retrieves the object with the given ID.
  update:
    description: Updates the object with the given ID.
  delete:
    description: Deletes the object with the given ID.
    global_parameters:
    - $filtering
  extends:
  - '@base'
  - '@described'
  - '@identifiable-stored'
  - '@named'
  - '@zonable'
  - '@timeable'

# Indexes
indexes:
- - namespace
  - kind

# Attributes
attributes:
  v1:
  - name: content
    description: Content of the alarm.
    type: string
    exposed: true
    stored: true
    required: true
    creation_only: true
    example_value: This is an alarm

  - name: data
    description: Data represent user data related to the alams.
    type: external
    exposed: true
    subtype: '[]map[string]string'
    stored: true

  - name: emails
    description: |-
      Emails is a list of recipients that should be emailed when this alarm is
      created.
    type: list
    exposed: true
    subtype: string
    stored: true
    example_value:
    - amir@aporeto.com
    - john@aporeto.com

  - name: kind
    description: |-
      Kind identifies the kind of alarms. If two alarms are created with the same
      identifier, then only the occurrence will be incremented.
    type: string
    exposed: true
    stored: true
    required: true
    creation_only: true
    example_value: aporeto.alarm.kind
    orderable: true

  - name: occurrences
    description: Number of time this alarm have been seen.
    type: external
    exposed: true
    subtype: '[]time.Time'
    stored: true
    creation_only: true
    autogenerated: true

  - name: status
    description: Status of the alarm.
    type: enum
    exposed: true
    stored: true
    allowed_choices:
    - Acknowledged
    - Open
    - Resolved
    default_value: Open
    orderable: true
